{"version":3,"file":"static/js/459.f5e258f2.chunk.js","mappings":"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","sources":["hooks/useFetchData.tsx","data/productsData.tsx","config/productDataGrid.ts","pages/products.tsx","config/twdPrice.ts","config/apiConfig.ts"],"sourcesContent":["import { useState, useEffect } from \"react\"\r\n\r\nfunction useFetchData<T>(route: string): { data: T | null; loading: boolean; error: string | null } {\r\n\r\n    const [data, setData] = useState<T | null>(null)\r\n    const [loading, setLoading] = useState<boolean>(false)\r\n    const [error, setError] = useState<string | null>(null)\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n\r\n            setLoading(true)\r\n            setError(null)\r\n\r\n            try {\r\n                const res = await fetch(`${route}`)\r\n\r\n                if (!res.ok) throw new Error(`HTTP error ${res.status}`)\r\n                const data: T = await res.json()\r\n                setData(data)\r\n            }\r\n            catch (err: any) {\r\n                console.error(`[useFetchData] ${route}`, err)\r\n                setError(err.message) // Failed to fetch\r\n            }\r\n            finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n\r\n        fetchData()\r\n\r\n    }, [route])\r\n\r\n    return { data, loading, error }\r\n}\r\n\r\nexport default useFetchData","// hooks\r\nimport useFetchData from \"../hooks/useFetchData\"\r\n\r\n// type\r\nimport { productsDataType } from \"../types/ProductsAPI.type\";\r\n\r\n// api\r\nimport { PRODUCTS_API } from \"../config/apiConfig\";\r\n\r\nconst ProductsData = () => {\r\n\r\n    const { data, ...rest } = useFetchData<productsDataType[]>(PRODUCTS_API)\r\n    const { error, loading } = useFetchData<productsDataType[]>(PRODUCTS_API)\r\n\r\n    const formattedData = data?.map((item) => ({\r\n        ...item,\r\n        updatedAt: new Date(item.updatedAt)\r\n    })) ?? []\r\n\r\n    return {\r\n        data: formattedData,\r\n        ...rest,\r\n        error,\r\n        loading\r\n    }\r\n}\r\n\r\nexport default ProductsData","// type\r\nimport { GridColDef } from '@mui/x-data-grid';\r\n\r\n// config\r\nimport { twdPrice } from './twdPrice';\r\n\r\nexport const paginationModel = { page: 0, pageSize: 5 };\r\nexport const columns: GridColDef[] = [\r\n    { field: 'id', headerName: 'SKU' },\r\n    { field: 'name', headerName: 'Product Name', width: 120 },\r\n    {\r\n        field: 'price',\r\n        headerName: 'Price',\r\n        ...twdPrice\r\n    },\r\n    { field: 'qty', headerName: 'Quantity', type: 'number' },\r\n    { field: 'mainCategory', headerName: 'Main category' },\r\n    { field: 'subCategory', headerName: 'subcategory' },\r\n    { field: 'status', headerName: 'Product status', type: 'boolean' },\r\n    { field: 'updatedAt', headerName: 'Last updated', type: 'dateTime', width: 200 },\r\n]","// components\r\nimport { Box, Grid, Button, ButtonGroup } from \"@mui/material\"\r\nimport { DataGrid, GridEventListener } from '@mui/x-data-grid';\r\n\r\n// data\r\nimport ProductsData from \"../data/productsData\";\r\n\r\n// config\r\nimport { columns as productColumns, paginationModel } from \"../config/productDataGrid\";\r\n\r\n// hooks\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Products = () => {\r\n\r\n    const { t } = useTranslation()\r\n    const { data } = ProductsData()\r\n    const navigate = useNavigate()\r\n\r\n    const [rowDataId, setRowDataId] = useState<number | null>(null)\r\n    const handleSelect: GridEventListener<'rowClick'> = (params) => {\r\n        if (params.id === rowDataId) {\r\n            setRowDataId(null) // Cancel\r\n        } else {\r\n            setRowDataId(params.id as number)\r\n        }\r\n    }\r\n\r\n    const handleBtnAdd = () => {\r\n        navigate('revision/add')\r\n    }\r\n\r\n    const handleBtnEdit = (id: number) => {\r\n        navigate(`revision/edit/${id}`)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Grid container direction={'column'} sx={{ height: 'calc( 100vh - 140px )' }}>\r\n                <Grid sx={{ flex: 1 }} size={12}>\r\n                    <Box sx={{ height: '100%' }}>\r\n                        <DataGrid\r\n                            rows={data}\r\n                            columns={productColumns}\r\n                            initialState={{ pagination: { paginationModel } }}\r\n                            pageSizeOptions={[5]}\r\n                            showToolbar\r\n                            onRowClick={handleSelect}\r\n                        />\r\n                    </Box>\r\n                </Grid>\r\n                <Grid sx={{ flex: '0 0 60px' }} size={12}>\r\n                    <Box\r\n                        sx={{\r\n                            height: '100%',\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            alignItems: 'center',\r\n                        }}\r\n                    >\r\n                        <ButtonGroup size=\"large\" sx={{ p: 1 }}>\r\n                            <Button\r\n                                disabled={rowDataId != null}\r\n                                onClick={handleBtnAdd}\r\n                            >\r\n                                {t('add_product')}\r\n                            </Button>\r\n                            <Button\r\n                                disabled={!rowDataId}\r\n                                onClick={() => handleBtnEdit(rowDataId || 0)}\r\n                            >\r\n                                {t('edit_product')}\r\n                            </Button>\r\n                        </ButtonGroup>\r\n                    </Box>\r\n                </Grid>\r\n            </Grid >\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Products","// type\r\nimport { GridColTypeDef } from '@mui/x-data-grid';\r\n\r\nconst currencyFormatter = new Intl.NumberFormat('zh-TW', {\r\n    style: 'currency',\r\n    currency: 'TWD',\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0,\r\n});\r\n\r\nexport const twdPrice: GridColTypeDef = {\r\n    type: 'number',\r\n    width: 130,\r\n    valueFormatter: (value: string) => currencyFormatter.format(Number(value)),\r\n};","const API_BASE = process.env.REACT_APP_API_BASE_URL;\r\n\r\nexport const SUMMARY_API = `${API_BASE}/summary`\r\n\r\nexport const SALE_DATA_WEEKLY_APL = `${API_BASE}/salesWeekly`\r\nexport const SALE_DATA_MONTH_APL = `${API_BASE}/saleMonth`\r\nexport const SALE_DATA_YEARLY_APL = `${API_BASE}/saleYearly`\r\n\r\nexport const PRODUCTS_API = `${API_BASE}/products`\r\n\r\nexport const CLOUDINARY_API = 'https://api.cloudinary.com/v1_1/ddzpuxyjr/image/upload'"],"names":["route","data","setData","useState","loading","setLoading","error","setError","useEffect","async","res","fetch","concat","ok","Error","status","json","err","console","message","fetchData","ProductsData","_data$map","_useFetchData","useFetchData","PRODUCTS_API","rest","_objectWithoutProperties","_excluded","formattedData","map","item","_objectSpread","updatedAt","Date","paginationModel","page","pageSize","columns","field","headerName","width","twdPrice","type","Products","t","useTranslation","navigate","useNavigate","rowDataId","setRowDataId","_jsx","_Fragment","children","_jsxs","Grid","container","direction","sx","height","flex","size","Box","DataGrid","rows","productColumns","initialState","pagination","pageSizeOptions","showToolbar","onRowClick","params","id","display","flexDirection","alignItems","ButtonGroup","p","Button","disabled","onClick","handleBtnAdd","currencyFormatter","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","valueFormatter","value","format","Number","API_BASE","process","SUMMARY_API","SALE_DATA_WEEKLY_APL","SALE_DATA_MONTH_APL","SALE_DATA_YEARLY_APL","CLOUDINARY_API"],"sourceRoot":""}