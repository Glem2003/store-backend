{"version":3,"file":"static/js/459.59538177.chunk.js","mappings":"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","sources":["hooks/useFormHooks.tsx","hooks/useFormatData.tsx","hooks/useFetchData.tsx","config/productDataGrid.ts","pages/products.tsx","config/twdPrice.ts","config/apiConfig.ts"],"sourcesContent":["// hooks\r\nimport { useState } from \"react\"\r\nimport { useNavigate } from \"react-router-dom\"\r\n\r\n// type\r\nimport { GridEventListener } from \"@mui/x-data-grid\"\r\n\r\nconst useFormHooks = () => {\r\n\r\n    const [rowDataId, setRowDataId] = useState<number | null>(null)\r\n\r\n    const navigate = useNavigate()\r\n\r\n    const handleBtnAdd = () => navigate('revision/add')\r\n    const handleBtnEdit = (id: number) => navigate(`revision/edit/${id}`)\r\n    const handleSelect: GridEventListener<'rowClick'> = (params) => {\r\n        if (params.id === rowDataId) {\r\n            setRowDataId(null) // Cancel\r\n        } else {\r\n            setRowDataId(params.id as number)\r\n        }\r\n    }\r\n    const handleCancel = () => navigate(-1)\r\n\r\n\r\n    return { rowDataId, setRowDataId, handleBtnAdd, handleBtnEdit, handleSelect, handleCancel }\r\n\r\n}\r\nexport default useFormHooks","// hooks\r\nimport useFetchData from \"./useFetchData\"\r\n\r\nconst useFormatData = <T, R = T>(\r\n    API: string,\r\n    formatter?: (item: T) => R\r\n) => {\r\n\r\n    const { data, error, loading, ...rest } = useFetchData<T[]>(API)\r\n\r\n    const formattedData = data?.map(item =>\r\n        formatter ? formatter(item) : item as unknown as R\r\n    ) ?? []\r\n\r\n    return {\r\n        data: formattedData,\r\n        ...rest,\r\n        error,\r\n        loading\r\n    }\r\n}\r\n\r\nexport default useFormatData","import { useState, useEffect } from \"react\"\r\n\r\nconst useFetchData = <T,>(route: string): { data: T | null; loading: boolean; error: string | null } => {\r\n\r\n    const [data, setData] = useState<T | null>(null)\r\n    const [loading, setLoading] = useState<boolean>(false)\r\n    const [error, setError] = useState<string | null>(null)\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n\r\n            setLoading(true)\r\n            setError(null)\r\n\r\n            try {\r\n                const res = await fetch(`${route}`)\r\n\r\n                if (!res.ok) throw new Error(`HTTP error ${res.status}`)\r\n                const data: T = await res.json()\r\n                setData(data)\r\n            }\r\n            catch (err: any) {\r\n                console.error(`[useFetchData] ${route}`, err)\r\n                setError(err.message) // Failed to fetch\r\n            }\r\n            finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n\r\n        fetchData()\r\n\r\n    }, [route])\r\n\r\n    return { data, loading, error }\r\n}\r\n\r\nexport default useFetchData","// type\r\nimport { GridColDef } from '@mui/x-data-grid';\r\n\r\n// config\r\nimport { twdPrice } from './twdPrice';\r\n\r\nexport const paginationModel = { page: 0, pageSize: 5 };\r\nexport const columns: GridColDef[] = [\r\n    { field: 'id', headerName: 'SKU' },\r\n    { field: 'name', headerName: 'Product Name', width: 120 },\r\n    {\r\n        field: 'price',\r\n        headerName: 'Price',\r\n        ...twdPrice\r\n    },\r\n    { field: 'qty', headerName: 'Quantity', type: 'number' },\r\n    { field: 'mainCategory', headerName: 'Main category' },\r\n    { field: 'subCategory', headerName: 'subcategory' },\r\n    { field: 'status', headerName: 'Product status', type: 'boolean' },\r\n    { field: 'updatedAt', headerName: 'Last updated', type: 'dateTime', width: 200 },\r\n]","// components\r\nimport { Box, Grid, Button, ButtonGroup } from \"@mui/material\"\r\nimport { DataGrid } from '@mui/x-data-grid';\r\n\r\n// config\r\nimport { columns as productColumns, paginationModel } from \"../config/productDataGrid\";\r\nimport { PRODUCTS_API } from \"../config/apiConfig\";\r\n\r\n// hooks\r\nimport { useTranslation } from \"react-i18next\";\r\nimport useFormatData from \"../hooks/useFormatData\";\r\nimport useFormHooks from \"../hooks/useFormHooks\";\r\n\r\n// type\r\nimport { ProductsDataType, FormattedProduct } from \"../types/ProductsAPI.type\";\r\n\r\nconst Products = () => {\r\n\r\n    const { t } = useTranslation()\r\n    const { data } = useFormatData<ProductsDataType, FormattedProduct>(\r\n        PRODUCTS_API,\r\n        item => ({\r\n            ...item,\r\n            updatedAt: new Date(item.updatedAt)\r\n        })\r\n    )\r\n\r\n    const { rowDataId, handleSelect, handleBtnAdd, handleBtnEdit } = useFormHooks()\r\n\r\n    return (\r\n        <>\r\n            <Grid container direction={'column'} sx={{ height: 'calc( 100vh - 140px )' }}>\r\n                <Grid sx={{ flex: 1 }} size={12}>\r\n                    <Box sx={{ height: '100%' }}>\r\n                        <DataGrid\r\n                            rows={data}\r\n                            columns={productColumns}\r\n                            initialState={{ pagination: { paginationModel } }}\r\n                            pageSizeOptions={[5]}\r\n                            showToolbar\r\n                            onRowClick={handleSelect}\r\n                        />\r\n                    </Box>\r\n                </Grid>\r\n                <Grid sx={{ flex: '0 0 60px' }} size={12}>\r\n                    <Box\r\n                        sx={{\r\n                            height: '100%',\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            alignItems: 'center',\r\n                        }}\r\n                    >\r\n                        <ButtonGroup size=\"large\" sx={{ p: 1 }}>\r\n                            <Button\r\n                                disabled={rowDataId != null}\r\n                                onClick={handleBtnAdd}\r\n                            >\r\n                                {t('add_product')}\r\n                            </Button>\r\n                            <Button\r\n                                disabled={!rowDataId}\r\n                                onClick={() => handleBtnEdit(rowDataId || 0)}\r\n                            >\r\n                                {t('edit_product')}\r\n                            </Button>\r\n                        </ButtonGroup>\r\n                    </Box>\r\n                </Grid>\r\n            </Grid >\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Products","// type\r\nimport { GridColTypeDef } from '@mui/x-data-grid';\r\n\r\nconst currencyFormatter = new Intl.NumberFormat('zh-TW', {\r\n    style: 'currency',\r\n    currency: 'TWD',\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0,\r\n});\r\n\r\nexport const twdPrice: GridColTypeDef = {\r\n    type: 'number',\r\n    width: 130,\r\n    valueFormatter: (value: string) => currencyFormatter.format(Number(value)),\r\n};","const API_BASE = process.env.REACT_APP_API_BASE_URL;\r\n\r\nexport const SUMMARY_API = `${API_BASE}/summary`\r\n\r\nexport const SALE_DATA_WEEKLY_APL = `${API_BASE}/salesWeekly`\r\nexport const SALE_DATA_MONTH_APL = `${API_BASE}/saleMonth`\r\nexport const SALE_DATA_YEARLY_APL = `${API_BASE}/saleYearly`\r\n\r\nexport const PRODUCTS_API = `${API_BASE}/products`\r\nexport const CUSTOMERS_API = `${API_BASE}/customers`\r\n\r\nexport const CLOUDINARY_API = 'https://api.cloudinary.com/v1_1/ddzpuxyjr/image/upload'"],"names":["useFormHooks","rowDataId","setRowDataId","useState","navigate","useNavigate","handleBtnAdd","handleBtnEdit","id","concat","handleSelect","params","handleCancel","useFormatData","API","formatter","_data$map","_useFetchData","useFetchData","data","error","loading","rest","_objectWithoutProperties","_excluded","formattedData","map","item","_objectSpread","route","setData","setLoading","setError","useEffect","async","res","fetch","ok","Error","status","json","err","console","message","fetchData","paginationModel","page","pageSize","columns","field","headerName","width","twdPrice","type","Products","t","useTranslation","PRODUCTS_API","updatedAt","Date","_jsx","_Fragment","children","_jsxs","Grid","container","direction","sx","height","flex","size","Box","DataGrid","rows","productColumns","initialState","pagination","pageSizeOptions","showToolbar","onRowClick","display","flexDirection","alignItems","ButtonGroup","p","Button","disabled","onClick","currencyFormatter","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","valueFormatter","value","format","Number","API_BASE","process","SUMMARY_API","SALE_DATA_WEEKLY_APL","SALE_DATA_MONTH_APL","SALE_DATA_YEARLY_APL","CUSTOMERS_API","CLOUDINARY_API"],"sourceRoot":""}